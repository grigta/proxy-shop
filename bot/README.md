# USE.NET Proxy Shop Telegram Bot

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–∫—É–ø–∫–∏ SOCKS5 –∏ PPTP –ø—Ä–æ–∫—Å–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üë§ **–ê–∫–∫–∞—É–Ω—Ç**: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è, –±–∞–ª–∞–Ω—Å–∞, —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
- üí∞ **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞**: –ß–µ—Ä–µ–∑ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É (BTC, ETH, USDT –∏ –¥—Ä.)
- üß¶ **SOCKS5**: –ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–∫—Å–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç—Ä–∞–Ω–µ, —à—Ç–∞—Ç—É, –≥–æ—Ä–æ–¥—É, ZIP
- üîê **PPTP**: –ü–æ–∫—É–ø–∫–∞ PPTP –ø—Ä–æ–∫—Å–∏ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ USA –∏ EUROPE
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∫—Å–∏ –Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- üîÑ **–ü—Ä–æ–¥–ª–µ–Ω–∏–µ**: –ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∫—Å–∏
- üìä **–ò—Å—Ç–æ—Ä–∏—è**: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∫—É–ø–æ–∫ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üåç **i18n**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
bot/
‚îú‚îÄ‚îÄ core/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ logging_config.py
‚îú‚îÄ‚îÄ keyboards/          # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ callback data
‚îÇ   ‚îú‚îÄ‚îÄ callback_data.py
‚îÇ   ‚îú‚îÄ‚îÄ main_menu.py
‚îÇ   ‚îú‚îÄ‚îÄ countries.py
‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îî‚îÄ‚îÄ proxies.py
‚îú‚îÄ‚îÄ middlewares/        # Middleware –¥–ª—è auth –∏ i18n
‚îÇ   ‚îú‚îÄ‚îÄ auth.py         # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ª–æ–≥–∏–Ω
‚îÇ   ‚îî‚îÄ‚îÄ i18n.py         # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ routers/            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ start.py        # /start –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ account.py      # –ü—Ä–æ—Ñ–∏–ª—å –∏ –∏—Å—Ç–æ—Ä–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ payment.py      # –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ socks5.py       # –ü–æ–∫—É–ø–∫–∞ SOCKS5
‚îÇ   ‚îú‚îÄ‚îÄ pptp.py         # –ü–æ–∫—É–ø–∫–∞ PPTP
‚îÇ   ‚îú‚îÄ‚îÄ proxy_actions.py # –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ support.py
‚îÇ   ‚îú‚îÄ‚îÄ rules.py
‚îÇ   ‚îî‚îÄ‚îÄ common.py       # –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã (/help, /cancel)
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ api_client.py   # HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è backend API
‚îú‚îÄ‚îÄ states/             # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ socks5.py
‚îÇ   ‚îú‚îÄ‚îÄ pptp.py
‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îî‚îÄ‚îÄ proxy_actions.py
‚îú‚îÄ‚îÄ utils/              # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ formatters.py   # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ validators.py   # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞
‚îú‚îÄ‚îÄ locales/            # –ü–µ—Ä–µ–≤–æ–¥—ã (i18n)
‚îÇ   ‚îú‚îÄ‚îÄ messages.pot
‚îÇ   ‚îú‚îÄ‚îÄ ru/LC_MESSAGES/
‚îÇ   ‚îî‚îÄ‚îÄ en/LC_MESSAGES/
‚îî‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–æ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r ../backend/requirements.txt
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:
```env
TELEGRAM_BOT_TOKEN=your_bot_token
BACKEND_API_URL=http://localhost:8000
REDIS_URL=redis://localhost:6379/0
LOG_LEVEL=INFO
```

3. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã:
```bash
python compile_translations.py
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
python -m bot.main
```

### Docker

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ docker-compose:

```bash
docker-compose up bot
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `BACKEND_API_URL` - URL backend API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: http://localhost:8000)
- `REDIS_URL` - URL Redis –¥–ª—è FSM storage (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: redis://localhost:6379/0)
- `LOG_LEVEL` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: INFO)
- `SUPPORT_USER_ID` - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- `DEFAULT_LOCALE` - —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (ru/en)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Middleware

1. **i18n Middleware**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –∏–ª–∏ Telegram
2. **Auth Middleware**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç/–ª–æ–≥–∏–Ω–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç API client

### FSM (Finite State Machine)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤:
- –í—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è SOCKS5 (—à—Ç–∞—Ç/–≥–æ—Ä–æ–¥/ZIP)
- –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏

### API Integration

–í—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å backend —á–µ—Ä–µ–∑ `BackendAPIClient`:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ 401
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Typed –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö endpoints

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `bot/routers/`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ Router –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
3. –î–æ–±–∞–≤—å—Ç–µ router –≤ `bot/routers/__init__.py`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ `locales/messages.pot`
2. –û–±–Ω–æ–≤–∏—Ç–µ `locales/ru/LC_MESSAGES/messages.po`
3. –û–±–Ω–æ–≤–∏—Ç–µ `locales/en/LC_MESSAGES/messages.po`
4. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ: `python compile_translations.py`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –¥–µ–±–∞–≥ –ª–æ–≥–∞–º–∏
LOG_LEVEL=DEBUG python -m bot.main
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - USE.NET Proxy Shop
